# 多线程

## 相关话题

### 不同语言对线程做了不同的封装，开发者可以直接使用封装好的API，降低了开发难度

* java的Executor
	- 线程的基础接口是Thread类 && Runnable接口
	- Executor是对基础接口的进一步封装
* android java的AsyncTask 和 Handler
* android kotlin的Coroutine（协程）

### 子线程与服务

1. 概述：

* 所谓服务，是指那些不需要和用户交互、不依赖于任何用户界面，即使当程序被切换到后台，或者用户打开了另外一个应用程序，仍然能够正常运行的代码
* 服务 === 不需要界面、运行在后台、另一个程序被打开时仍可正常运行
* 但是，服务 ！== 子线程
* 实际上服务并不会自动开启线程，所有的代码都是默认运行在主线程当中的。也就是说，我们需要在服务的内部手动创建子线程，并在这里执行具体的任务，否则就有可能出现主线程被阻塞住的情况
* 也就是说服务并不等价于子线程，二者之间并没有必然的联系
* 所以当你的服务需要执行耗时操作时，你应该在你的服务中手动创建子线程，然后在子线程中执行相应的耗时操作，防止服务阻塞主线程（UI线程）
* 另外，当创建服务的进程被杀掉时，所有依赖于该进程的服务也会被停掉哦

2. 小结：

- 服务 == 不需要界面，运行在后台，另一个程序被打开占用屏幕时仍可运行
- 服务 ！= 子线程
- 进程被杀掉时，服务也会被停掉

### 子线程中更新UI

1. 概述

子线程中不能直接更新UI，必须借助Handler来完成UI的更新任务

2. 相关API

- Message
- Handler
- MessageQueue
- Looper

### android java中使用子线程执行耗时任务的两种方式

|执行耗时任务的方法|方式一|方式二|
|----| --------   | -----  |
|概述|使用基础API(Thread+Runnable+Handler)|使用封装好的API(AsyncTask)|
|相关class|<li>Thread<li>Runnable<li>Handler<li>Message<li>Bundle|AsyncTask|
|相关知识点|<li>线程、线程池Thread/Runnable<li>异步消息处理机制Handler<li>消息Message|只需要了解AsyncTask子类怎么实现和调用就成，其余的一律不需要了解，不需要了解子线程、异步消息处理机制什么的|